
            1. Введение

Программа предназначена для генерации растровых изображений географических карт, применяемых в качестве 
иллюстративного материала в публикациях. Для построенния карты требуются: а) файлы с данными отображаемых
контуров; б) файлы с данными отображаемых растровых точек (названия населённых пунктов, гор и т.п.);
в) файл отметок, содержащий информацию об отображаемых на карте дополнительных метках. Файлы с данными
контуров и реперных точек могут покрывать площадь, существенно превышающую отображаемую на карте. Выбор 
отображаемой на карте (под)области осуществляется на основе данных файла отметок: при его считывании
определяется необходимый размер области с учётом полей и пропорций растрового изображения, подбирается
шаг координатной сетки и формируется изображение, включающее все указанные отметки.

Примечание: программа была разработана в 90-х для Windows 3.10, далее, примерно в 1997 году, модифицирована
для работы Windows 95. На момент разработки общедоступных геоданных по сути не было и для задания контуров,
реперных точек и т.п. применялись простейшие форматы, позволяющие минимальными усилиями добавлять данные
из любого подвернувшегося источника. В 2019 адаптирована для работы в современных 64-х разрядных версиях
Windows, но эта модернизация, однако, является минимальной и поддержка современных форматов геоданных
так и не реализована.


            2. Формат широты и долготы

    01.2345678     угол в градусах в виде вещественного числа с точкой или с запятой
    01.23          угол в градусах и минутах (ровно два знака после точки или запятой),
	           соответствует 01.3833333(3) в предыдущем примере
    01°23'45.678"  угол в градусах, минутах и секундах; градусы - обязательная часть, 
	           минуты и секунды - могут быть пропущены; если присутствуют все части,
                   то сначала градусы, потом минуты, потом секунды. Пробелы не допустимы.

Все входные файлы текстовые, могут быть в кодировке OEM (в кирилличных веерсиях Windows 
соответствует кодовой странице 866), в кодировке ANSI (1251 соответственно) и в UTF8 как
с BOM (Byte-Order-Mark), так и без.


            3. Файл контуров (.arc)

Пример файла:
    Пробное изображение
         2
         5 ^1 Прямоугольник
      -3.000000       -3.000000
      -3.000000        3.000000
       3.000000        3.000000
       3.000000       -3.000000
      -3.000000       -3.000000
         7 ^2 Многоугольник
      -2.000000       -3.500000
       2.000000       -3.500000
       4.000000        0.000000
       2.000000        3.500000
      -2.000000        3.500000
      -4.000000        0.000000
      -2.000000       -3.500000

Первая строка файла содержит название для всего файла.
Вторая строка - число контуров.
Далее для каждого контура приводится свой блок:
- Первая строка блока - число точек, необязательный стиль линии и необязательное название контура.
- Далее блок содержит широту и долготу для каждой точки контура.

Стиль линии указывается числом после символа ^:
0  - белая сплошная линия 0.1 мм (будет видна только если наложится поверх чёрного)
1  - чёрная сплошная линия 0.1 мм
2  - чёрная сплошная линия 0.2 мм
3  - чёрная сплошная линия 0.3 мм
4  - чёрная сплошная линия 0.5 мм
5  - чёрная сплошная линия 0.7 мм
6  - чёрная сплошная линия 1.0 мм
7  - чёрная сплошная линия 1.5 мм
8  - чёрная сплошная линия 2.0 мм
9  - тонкий чёрный пунктир из точек
10 - тонкий чёрный пунктир из штрихов
11 - тонкий чёрный пунктир точка-тире
12 - тонкий чёрный пунктир точка-точка-тире


            4. Файл реперных точек (.rep)

Пример файла:
		51.533333	   0.166666	40000	40000	100	London
		55.900000	  -3.066666	40000	40000	70	Edinburg

На каждой строке файла приводятся сведения об одной реперной точке:

    широта  долгота  имя_макс_шаг  точка_макс_шаг  размер_точки  название_точки

"имя_макс_шаг" и "точка_макс_шаг" - максимальный шаг координатной сетки в тысячных долях 
градуса, при превышении которого точка не изображается. Осмысленные значения максимального
шага составляют от 3 (примерно равно самому мелкому шагу сетки) и до 40000 (самый крупный
шаг из используемых)
"размер_точки" указывается в процентах от максимального (от 0 до 100); максимальный размер
задаётся в интерфейсе программы.

Примечание: Шаг сетки может составлять: 40°, 30°, 20°, 10°, 5°, 4°, 3°, 2°, 1° ( в целых 
градусах) и в долях градуса: 0.75° (45'), 0.5° (30'), 0.25° (15'), 0.166(6)° (10'), 0.1° (6'),
0.0833(3)° (5'), 0.05° (3'), 0.0166(6)° (1'), 0.0125° (45"), 0.0083(3)° (30"), 0.0041(6)° (15"),
0.0027(7) (10"), 0.0016(6)° (6"), 0.0013(8)° (5"), 0.0008(3)° (3"), 0.0002(7)° (1")


            5. Файл отметок (.dat)

Пример файла:
    All_Points
    43.63908 145.37371 ^0
    44.52445 146.58777 ^0
    44.513060  146.165000 ^1 0.1
    44.509440  146.157780 ^2 0.2
    44.509440  146.168330 ^3 0.3
    44.505830  146.166940 ^4 0.4
    44.504440  146.182780 ^11 0.5
    44.503330  146.157500 ^12 0.6
    44.503060  146.187220 ^13 0.7
    44.499720  146.156110 ^14 0.8
    44.497500  146.149440 ^1 0.9
    44.490560  146.196390 ^2 1
    44.488610  146.106670 ^3 1.1

Первая строка файла содержит название для всего файла
Далее приводятся строки, каждая ихз которых описывает отдельную отметку:

    широту  долгота  ^стиль  размер
	
Программа считывает файл отметок, определяет необходимую область карты для отображения всех отметок,
определяет удобный шаг сетки и формирует выходной .bmp файл с нужным фрагментом карты.

"^Стиль" отметки может быть:
^0  - невидимая отметка (не изображается, но используется для определения размеров карты; может
      применяться, например, для задания минимально изображаемой части карты)
^1  - чёрный круг с тонким белым контуром (контур нужен для визуального отделения при наложении)
^2  - чёрный квадрат с тонким белым контуром
^3  - чёрный ромб с тонким белым контуром
^4  - чёрный треугольник с тонким белым контуром
^11 - серый круг с тонким черным контуром
^12 - серый квадрат с тонким черным контуром
^13 - серый ромб с тонким черным контуром
^14 - серый треугольник с тонким черным контуром
Примечание: для отображения серых отметок нужен, как минимум, 256-ти цветный битмап, монохроматическое
изображение для этого не подходит. Это, в свою очередь, увеличивает размер битмапа (размер около 500 МБ
для битмапа является максимальным, после которого возникнут проблеммы при работе с ним; так, скажем,
для 256-ти цветов и 600 dpi размер 1x0.9 метра является близким к предельному)

"Размер" отметки задаётся как множитель от 0.1 до 10 к "стандартному размеру" отметки, задаваемого в 
интерфейсе программы.